<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hospital Dashboard</title>
  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body { background: #f0f4f9; font-family: "Prompt", sans-serif; }
    .navbar { background: linear-gradient(90deg, #2563eb, #1e40af); }
    .navbar-brand { font-weight: 600; font-size: 1.4rem; color: #fff !important; }
    .stat-box {
      border-radius: 20px; padding: 20px; text-align: center;
      font-weight: 600; color: #fff; transition: transform 0.2s ease-in-out;
    }
    .stat-box:hover { transform: translateY(-5px); }
    .stat-number { font-size: 2.2rem; font-weight: bold; }
    .card { border-radius: 20px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08); border: none; }
    h5 { font-weight: 600; margin-bottom: 1rem; }
    .chart-card { height: 400px; display: flex; flex-direction: column; justify-content: center; }
    .chart-card canvas { flex-grow: 1; }
  </style>
</head>
<body>
  <div class="container py-4">
    <h1 class="mb-4 text-center">üöë Hospital Dashboard</h1>

    <!-- Navigation Tabs -->
    <ul class="nav nav-tabs mb-4" id="dashboardTabs">
      <li class="nav-item">
        <a class="nav-link active" data-bs-toggle="tab" href="#refer">üìä Refer Dashboard</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-bs-toggle="tab" href="#ems">üß∞ EMS Checklist</a>
      </li>
    </ul>

    <!-- Tab Content -->
    <div class="tab-content">
      <!-- Refer Dashboard -->
      <div class="tab-pane fade show active" id="refer">
        <div class="row g-4 mb-4">
          <div class="col-md-3 col-6">
            <div class="stat-box" style="background: linear-gradient(135deg,#3b82f6,#2563eb);">
              <p>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô Refer</p>
              <p class="stat-number" id="referCount">0</p>
            </div>
          </div>
          <div class="col-md-3 col-6">
            <div class="stat-box" style="background: linear-gradient(135deg,#22c55e,#16a34a);">
              <p>‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</p>
              <p class="stat-number" id="staffCount">0</p>
            </div>
          </div>
          <div class="col-md-3 col-6">
            <div class="stat-box" style="background: linear-gradient(135deg,#f59e0b,#d97706);">
              <p>‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</p>
              <p class="stat-number" id="positionCount">0</p>
            </div>
          </div>
          <div class="col-md-3 col-6">
            <div class="stat-box" style="background: linear-gradient(135deg,#ef4444,#b91c1c);">
              <p>‡∏£‡∏ñ Refer</p>
              <p class="stat-number" id="carCount">0</p>
            </div>
          </div>
        </div>

        <div class="row g-4">
          <div class="col-md-6">
            <div class="card p-4 chart-card">
              <h5 class="text-center">üìå ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô Refer ‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏£</h5>
              <canvas id="shiftChart"></canvas>
            </div>
          </div>
          <div class="col-md-6">
            <div class="card p-4 chart-card">
              <h5 class="text-center">üë©‚Äç‚öïÔ∏è ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</h5>
              <canvas id="positionChart"></canvas>
            </div>
          </div>
        </div>
      </div>

      <!-- EMS Checklist Dashboard -->
      <div class="tab-pane fade" id="ems">
        <div class="row g-4">
          <div class="col-md-6">
            <div class="card p-4 chart-card">
              <h5 class="text-center">üì¶ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ</h5>
              <canvas id="emsChart"></canvas>
            </div>
          </div>
          <div class="col-md-6">
            <div class="card p-4">
              <h5 class="text-center">üìã ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ä‡πá‡∏Ñ‡∏•‡∏¥‡∏™‡∏ï‡πå</h5>
              <table class="table table-striped">
                <thead>
                  <tr><th>‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</th><th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th></tr>
                </thead>
                <tbody id="emsTable"></tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Mock data (‡πÅ‡∏ó‡∏ô Google Sheet ‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô)
    const data = [
      { date: "22/5/2025", shift: "‡πÄ‡∏ä‡πâ‡∏≤", staff: "‡∏ô‡∏±‡∏ô‡∏ó‡∏ô‡∏¥‡∏ï‡∏¢‡πå ‡∏°‡∏ì‡∏µ‡∏ó‡∏±‡∏û", position: "RN", car: "‡∏£‡∏ñ‡∏Ñ‡∏±‡∏ô‡∏ó‡∏µ‡πà 4" },
      { date: "3/6/2025", shift: "‡∏î‡∏∂‡∏Å", staff: "‡∏™‡∏∏‡∏î‡∏≤‡∏£‡∏±‡∏ï‡∏ô‡πå ‡∏£‡∏π‡∏õ‡∏™‡∏π‡∏á", position: "AEM-T", car: "‡∏£‡∏ñ‡∏Ñ‡∏±‡∏ô‡∏ó‡∏µ‡πà 3" },
      { date: "25/7/2025", shift: "‡πÄ‡∏ä‡πâ‡∏≤", staff: "‡∏à‡∏≤‡∏£‡∏∏‡∏ß‡∏£‡∏£‡∏ì ‡∏´‡∏≤‡∏ß‡∏±‡∏ô", position: "RN", car: "‡∏£‡∏ñ‡∏Ñ‡∏±‡∏ô‡∏ó‡∏µ‡πà 3" }
    ];

    // Update summary
    document.getElementById("referCount").textContent = data.length;
    document.getElementById("staffCount").textContent = new Set(data.map(d => d.staff)).size;
    document.getElementById("positionCount").textContent = new Set(data.map(d => d.position)).size;
    document.getElementById("carCount").textContent = new Set(data.map(d => d.car)).size;

    // Count by shift
    const shiftData = {};
    data.forEach(d => { shiftData[d.shift] = (shiftData[d.shift] || 0) + 1; });

    new Chart(document.getElementById("shiftChart"), {
      type: "bar",
      data: {
        labels: Object.keys(shiftData),
        datasets: [{ label: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô Refer", data: Object.values(shiftData), backgroundColor: "#3b82f6", borderRadius: 10 }]
      },
      options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
    });

    // Count by position
    const posData = {};
    data.forEach(d => { posData[d.position] = (posData[d.position] || 0) + 1; });

    new Chart(document.getElementById("positionChart"), {
      type: "doughnut",
      data: { labels: Object.keys(posData), datasets: [{ data: Object.values(posData), backgroundColor: ["#3b82f6", "#22c55e", "#f59e0b", "#ef4444"] }] },
      options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: "bottom" } } }
    });

    // ---------------------- EMS Checklist ----------------------
    const emsData = [
      { item: "Ambu Bag", status: "‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ" },
      { item: "Oxygen Tank", status: "‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ô‡πâ‡∏≠‡∏¢" },
      { item: "Suction", status: "‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ" },
      { item: "Monitor", status: "‡∏ä‡∏≥‡∏£‡∏∏‡∏î" }
    ];

    let tbody = document.getElementById("emsTable");
    emsData.forEach(row => {
      tbody.innerHTML += `<tr><td>${row.item}</td><td>${row.status}</td></tr>`;
    });

    let statusCount = {};
    emsData.forEach(r => { statusCount[r.status] = (statusCount[r.status] || 0) + 1; });

    new Chart(document.getElementById("emsChart"), {
      type: "pie",
      data: { labels: Object.keys(statusCount), datasets: [{ data: Object.values(statusCount), backgroundColor: ["#22c55e","#facc15","#ef4444"] }] },
      options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: "bottom" } } }
    });
  </script>
</body>
</html>
